<!-- مسیر فایل: MainWindow.xaml -->
<!-- ابتدای کد -->
<Window x:Class="TradingJournal.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="{Binding Title}"
        Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        FlowDirection="RightToLeft"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="14"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{StaticResource DefaultFontFamily}">

    <Grid>
        <md:DialogHost Identifier="RootDialog">
            <md:DrawerHost IsLeftDrawerOpen="{Binding IsMenuOpen}">
                <!-- Main Content -->
                <DockPanel>
                    <!-- Top Bar -->
                    <md:ColorZone DockPanel.Dock="Top"
                                  Padding="16"
                                  Mode="PrimaryMid">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Menu Toggle -->
                            <ToggleButton Grid.Column="0"
                                          Style="{StaticResource MaterialDesignHamburgerToggleButton}"
                                          IsChecked="{Binding IsMenuOpen}"/>

                            <!-- Title -->
                            <TextBlock Grid.Column="1"
                                       Text="{Binding Title}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Style="{StaticResource MaterialDesignHeadline6TextBlock}"/>

                            <!-- Action Buttons -->
                            <StackPanel Grid.Column="2"
                                        Orientation="Horizontal">
                                <Button Command="{Binding NewTradeCommand}"
                                        Style="{StaticResource MaterialDesignFloatingActionMiniButton}"
                                        Margin="0,0,8,0"
                                        ToolTip="معامله جدید">
                                    <md:PackIcon Kind="Plus"/>
                                </Button>
                                
                                <Button Command="{Binding RefreshCommand}"
                                        Style="{StaticResource MaterialDesignIconButton}"
                                        ToolTip="بازخوانی">
                                    <md:PackIcon Kind="Refresh"/>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </md:ColorZone>

                    <!-- Status Bar -->
                    <StatusBar DockPanel.Dock="Bottom">
                        <StatusBarItem>
                            <TextBlock Text="{Binding StatusMessage}"/>
                        </StatusBarItem>
                    </StatusBar>

                    <!-- Main Content Area -->
                    <Grid>
                        <Frame x:Name="MainFrame"
                               NavigationUIVisibility="Hidden"/>
                    </Grid>
                </DockPanel>
            </md:DrawerHost>
        </md:DialogHost>
        
        <!-- Snackbar را خارج از DialogHost قرار می‌دهیم -->
        <md:Snackbar MessageQueue="{md:MessageQueue}"
                     x:Name="MainSnackbar"
                     VerticalAlignment="Bottom"
                     HorizontalAlignment="Center"/>
    </Grid>
</Window>
<!-- پایان کد -->