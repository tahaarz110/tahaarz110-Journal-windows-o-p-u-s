// üìÅ UI/Views/BackupManagerView.xaml
// ===== ÿ¥ÿ±Ÿàÿπ ⁄©ÿØ =====
<UserControl x:Class="TradingJournal.UI.Views.BackupManagerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <md:ColorZone Grid.Row="0" Mode="PrimaryMid" Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Text="ŸÖÿØ€åÿ±€åÿ™ ÿ®⁄©ÿßŸæ Ÿà ÿ®ÿßÿ≤€åÿßÿ®€å" 
                          Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                          VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="ÿß€åÿ¨ÿßÿØ ÿ®⁄©ÿßŸæ ÿ¨ÿØ€åÿØ"
                            Click="OnCreateBackup"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Background="{DynamicResource SecondaryHueMidBrush}"
                            Margin="0,0,10,0"/>
                    
                    <Button Content="ÿ®ÿßÿ≤€åÿßÿ®€å"
                            Click="OnRestore"
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Margin="0,0,10,0"/>
                    
                    <Button Click="OnSettings"
                            Style="{StaticResource MaterialDesignIconButton}"
                            ToolTip="ÿ™ŸÜÿ∏€åŸÖÿßÿ™">
                        <md:PackIcon Kind="Settings" Width="24" Height="24"/>
                    </Button>
                </StackPanel>
            </Grid>
        </md:ColorZone>
        
        <!-- Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="350"/>
            </Grid.ColumnDefinitions>
            
            <!-- Backup List -->
            <Grid Grid.Column="0" Margin="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- Search and Filter -->
                <Grid Grid.Row="0" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBox Grid.Column="0"
                            x:Name="SearchBox"
                            Style="{StaticResource MaterialDesignOutlinedTextBox}"
                            md:HintAssist.Hint="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿØÿ± ÿ®⁄©ÿßŸæ‚ÄåŸáÿß..."
                            md:TextFieldAssist.HasClearButton="True"
                            TextChanged="OnSearchTextChanged"/>
                    
                    <ComboBox Grid.Column="1"
                             x:Name="FilterCombo"
                             Width="150"
                             Margin="10,0,0,0"
                             Style="{StaticResource MaterialDesignOutlinedComboBox}"
                             md:HintAssist.Hint="ŸÅ€åŸÑÿ™ÿ±"
                             SelectionChanged="OnFilterChanged">
                        <ComboBoxItem Content="ŸáŸÖŸá" Tag="All" IsSelected="True"/>
                        <ComboBoxItem Content="ÿØÿ≥ÿ™€å" Tag="Manual"/>
                        <ComboBoxItem Content="ÿÆŸàÿØ⁄©ÿßÿ±" Tag="Automatic"/>
                        <ComboBoxItem Content="ÿ±ŸÖÿ≤ŸÜ⁄Øÿßÿ±€å ÿ¥ÿØŸá" Tag="Encrypted"/>
                    </ComboBox>
                </Grid>
                
                <!-- Backup List -->
                <DataGrid Grid.Row="1"
                         x:Name="BackupGrid"
                         AutoGenerateColumns="False"
                         CanUserAddRows="False"
                         SelectionMode="Single"
                         SelectionChanged="OnBackupSelected">
                    
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ŸÜÿßŸÖ ŸÅÿß€åŸÑ" 
                                          Binding="{Binding FileName}" 
                                          Width="2*"/>
                        
                        <DataGridTextColumn Header="ÿ™ÿßÿ±€åÿÆ ÿß€åÿ¨ÿßÿØ" 
                                          Binding="{Binding CreatedAt, StringFormat='{}{0:yyyy/MM/dd HH:mm}'}" 
                                          Width="150"/>
                        
                        <DataGridTextColumn Header="ÿ≠ÿ¨ŸÖ" 
                                          Binding="{Binding FileSizeFormatted}" 
                                          Width="100"/>
                        
                        <DataGridTemplateColumn Header="ŸÜŸàÿπ" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <md:Chip Content="{Binding TypeText}" 
                                               Margin="2"/>
                                        <md:PackIcon Kind="Lock" 
                                                   Width="16" Height="16"
                                                   Foreground="Orange"
                                                   VerticalAlignment="Center"
                                                   Margin="4,0,0,0"
                                                   Visibility="{Binding IsEncrypted, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <DataGridTemplateColumn Header="ÿπŸÖŸÑ€åÿßÿ™" Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Click="OnRestoreBackup"
                                               Tag="{Binding FilePath}"
                                               Style="{StaticResource MaterialDesignFlatButton}"
                                               Content="ÿ®ÿßÿ≤€åÿßÿ®€å"
                                               Margin="0,0,5,0"/>
                                        
                                        <Button Click="OnDeleteBackup"
                                               Tag="{Binding FilePath}"
                                               Style="{StaticResource MaterialDesignIconButton}"
                                               Foreground="Red">
                                            <md:PackIcon Kind="Delete"/>
                                        </Button>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
            
            <!-- Details Panel -->
            <md:Card Grid.Column="1" Margin="0,16,16,16">
                <ScrollViewer>
                    <StackPanel Margin="16">
                        <TextBlock Text="ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ®⁄©ÿßŸæ"
                                  Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                                  Margin="0,0,0,16"/>
                        
                        <Grid x:Name="DetailsPanel" Visibility="Collapsed">
                            <StackPanel>
                                <!-- File Name -->
                                <TextBlock Text="ŸÜÿßŸÖ ŸÅÿß€åŸÑ:" Foreground="Gray"/>
                                <TextBlock x:Name="FileNameText" 
                                         Text="-"
                                         Margin="0,0,0,10"
                                         TextWrapping="Wrap"/>
                                
                                <!-- Created Date -->
                                <TextBlock Text="ÿ™ÿßÿ±€åÿÆ ÿß€åÿ¨ÿßÿØ:" Foreground="Gray"/>
                                <TextBlock x:Name="CreatedDateText" 
                                         Text="-"
                                         Margin="0,0,0,10"/>
                                
                                <!-- File Size -->
                                <TextBlock Text="ÿ≠ÿ¨ŸÖ ŸÅÿß€åŸÑ:" Foreground="Gray"/>
                                <TextBlock x:Name="FileSizeText" 
                                         Text="-"
                                         Margin="0,0,0,10"/>
                                
                                <!-- Description -->
                                <TextBlock Text="ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™:" Foreground="Gray"/>
                                <TextBlock x:Name="DescriptionText" 
                                         Text="-"
                                         TextWrapping="Wrap"
                                         Margin="0,0,0,10"/>
                                
                                <!-- Components -->
                                <TextBlock Text="ÿßÿ¨ÿ≤ÿß€å ÿ®⁄©ÿßŸæ:" 
                                         Foreground="Gray"
                                         Margin="0,10,0,5"/>
                                
                                <ItemsControl x:Name="ComponentsList">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                                <md:PackIcon Kind="Check" 
                                                           Width="16" Height="16"
                                                           Foreground="Green"
                                                           Margin="0,0,5,0"/>
                                                <TextBlock Text="{Binding}"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                
                                <!-- Statistics -->
                                <Separator Margin="0,15"/>
                                
                                <TextBlock Text="ÿ¢ŸÖÿßÿ±:" 
                                         Foreground="Gray"
                                         Margin="0,0,0,5"/>
                                
                                <Grid x:Name="StatsGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="ÿ™ÿπÿØÿßÿØ ÿ±⁄©Ÿàÿ±ÿØ:" 
                                                 FontSize="11" 
                                                 Foreground="Gray"/>
                                        <TextBlock x:Name="RecordCountText" 
                                                 Text="-"
                                                 FontWeight="Bold"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="ÿ™ÿπÿØÿßÿØ ÿ™ÿµÿßŸà€åÿ±:" 
                                                 FontSize="11" 
                                                 Foreground="Gray"/>
                                        <TextBlock x:Name="ImageCountText" 
                                                 Text="-"
                                                 FontWeight="Bold"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Grid>
                        
                        <!-- No Selection -->
                        <TextBlock x:Name="NoSelectionText"
                                 Text="€å⁄© ÿ®⁄©ÿßŸæ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ"
                                 HorizontalAlignment="Center"
                                 Foreground="Gray"
                                 Margin="0,50"/>
                    </StackPanel>
                </ScrollViewer>
            </md:Card>
        </Grid>
        
        <!-- Progress Overlay -->
        <Grid x:Name="ProgressOverlay" 
              Grid.RowSpan="2" 
              Background="#CC000000"
              Visibility="Collapsed">
            <md:Card Width="400" Height="200">
                <StackPanel Margin="20">
                    <TextBlock x:Name="ProgressTitle"
                             Text="ÿØÿ± ÿ≠ÿßŸÑ ÿß€åÿ¨ÿßÿØ ÿ®⁄©ÿßŸæ..."
                             Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                             Margin="0,0,0,20"/>
                    
                    <TextBlock x:Name="ProgressMessage"
                             Text="ŸÑÿ∑ŸÅÿßŸã ÿµÿ®ÿ± ⁄©ŸÜ€åÿØ..."
                             Margin="0,0,0,10"/>
                    
                    <ProgressBar x:Name="ProgressBar"
                               Height="4"
                               Margin="0,10"/>
                    
                    <TextBlock x:Name="ProgressPercentage"
                             Text="0%"
                             HorizontalAlignment="Center"
                             Margin="0,10"/>
                </StackPanel>
            </md:Card>
        </Grid>
    </Grid>
</UserControl>
// ===== Ÿæÿß€åÿßŸÜ ⁄©ÿØ =====