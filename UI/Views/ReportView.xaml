<!-- مسیر فایل: UI/Views/ReportView.xaml -->
<!-- ابتدای کد -->
<UserControl x:Class="TradingJournal.UI.Views.ReportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             FlowDirection="RightToLeft">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <md:Card Grid.Row="0" Margin="8">
            <Grid Margin="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="گزارش‌ساز"
                           Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                           VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <DatePicker x:Name="StartDatePicker"
                                md:HintAssist.Hint="از تاریخ"
                                Style="{StaticResource MaterialDesignFloatingHintDatePicker}"
                                Width="150"
                                Margin="0,0,8,0"/>
                    
                    <DatePicker x:Name="EndDatePicker"
                                md:HintAssist.Hint="تا تاریخ"
                                Style="{StaticResource MaterialDesignFloatingHintDatePicker}"
                                Width="150"
                                Margin="0,0,16,0"/>
                    
                    <ComboBox x:Name="FormatComboBox"
                              md:HintAssist.Hint="فرمت خروجی"
                              Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                              Width="120"
                              SelectedIndex="0"
                              Margin="0,0,16,0">
                        <ComboBoxItem Content="PDF"/>
                        <ComboBoxItem Content="Excel"/>
                        <ComboBoxItem Content="HTML"/>
                        <ComboBoxItem Content="Word"/>
                    </ComboBox>
                    
                    <CheckBox x:Name="IncludeAnalysisCheckBox"
                              Content="شامل تحلیل"
                              Style="{StaticResource MaterialDesignCheckBox}"
                              IsChecked="True"
                              Margin="0,0,8,0"/>
                    
                    <CheckBox x:Name="IncludeChartsCheckBox"
                              Content="شامل نمودار"
                              Style="{StaticResource MaterialDesignCheckBox}"
                              IsChecked="True"/>
                </StackPanel>
            </Grid>
        </md:Card>

        <!-- Report Templates -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled">
            <ItemsControl ItemsSource="{Binding Templates}" Margin="8">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <md:Card Width="350" Height="200" Margin="8"
                                 md:ShadowAssist.ShadowDepth="Depth2">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Template Header -->
                                <md:ColorZone Grid.Row="0"
                                              Mode="PrimaryMid"
                                              Padding="16">
                                    <StackPanel Orientation="Horizontal">
                                        <md:PackIcon Kind="{Binding Icon}"
                                                     Width="32" Height="32"
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,16,0"/>
                                        
                                        <TextBlock Text="{Binding Title}"
                                                   Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                                                   VerticalAlignment="Center"
                                                   Foreground="White"/>
                                    </StackPanel>
                                </md:ColorZone>

                                <!-- Description -->
                                <TextBlock Grid.Row="1"
                                           Text="{Binding Description}"
                                           TextWrapping="Wrap"
                                           Margin="16"
                                           VerticalAlignment="Center"
                                           Style="{StaticResource MaterialDesignBody1TextBlock}"/>

                                <!-- Action Button -->
                                <Button Grid.Row="2"
                                        Content="تولید گزارش"
                                        Tag="{Binding}"
                                        Click="OnGenerateReport"
                                        Style="{StaticResource MaterialDesignFlatButton}"
                                        HorizontalAlignment="Stretch"
                                        Margin="8"/>
                            </Grid>
                        </md:Card>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Progress -->
        <ProgressBar x:Name="ProgressBar"
                     Grid.Row="1"
                     IsIndeterminate="True"
                     VerticalAlignment="Top"
                     Visibility="Collapsed"/>
    </Grid>
</UserControl>
<!-- پایان کد -->