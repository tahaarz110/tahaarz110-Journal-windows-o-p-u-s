<!-- مسیر فایل: UI/Views/SettingsView.xaml -->
<!-- ابتدای کد -->
<UserControl x:Class="TradingJournal.UI.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             FlowDirection="RightToLeft">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="24">
                <!-- عمومی -->
                <md:Card Margin="0,8">
                    <Expander Header="تنظیمات عمومی" IsExpanded="True">
                        <Grid Margin="24,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ComboBox Grid.Column="0" Grid.Row="0"
                                      x:Name="LanguageComboBox"
                                      md:HintAssist.Hint="زبان"
                                      Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                      Margin="0,0,8,16">
                                <ComboBoxItem Content="فارسی" Tag="fa-IR"/>
                                <ComboBoxItem Content="English" Tag="en-US"/>
                            </ComboBox>

                            <ComboBox Grid.Column="1" Grid.Row="0"
                                      x:Name="ThemeComboBox"
                                      md:HintAssist.Hint="تم"
                                      Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                      SelectionChanged="OnThemeChanged"
                                      Margin="8,0,0,16">
                                <ComboBoxItem Content="روشن" Tag="Light"/>
                                <ComboBoxItem Content="تاریک" Tag="Dark"/>
                                <ComboBoxItem Content="خودکار" Tag="Auto"/>
                            </ComboBox>

                            <ComboBox Grid.Column="0" Grid.Row="1"
                                      x:Name="AccentColorComboBox"
                                      md:HintAssist.Hint="رنگ تاکید"
                                      Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                      SelectionChanged="OnAccentColorChanged"
                                      Margin="0,0,8,16"/>

                            <ComboBox Grid.Column="1" Grid.Row="1"
                                      x:Name="FontFamilyComboBox"
                                      IsEditable="True"
                                      md:HintAssist.Hint="فونت"
                                      Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                      Margin="8,0,0,16">
                                <ComboBoxItem Content="B Nazanin"/>
                                <ComboBoxItem Content="Tahoma"/>
                                <ComboBoxItem Content="Vazir"/>
                                <ComboBoxItem Content="IRANSans"/>
                            </ComboBox>

                            <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2">
                                <TextBlock Text="اندازه فونت" Margin="0,0,0,8"/>
                                <Slider x:Name="FontSizeSlider"
                                        Minimum="10" Maximum="24" Value="14"
                                        TickFrequency="1" IsSnapToTickEnabled="True"
                                        AutoToolTipPlacement="TopLeft"/>
                            </StackPanel>
                        </Grid>
                    </Expander>
                </md:Card>

                <!-- معاملات -->
                <md:Card Margin="0,8">
                    <Expander Header="تنظیمات معاملاتی">
                        <Grid Margin="24,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBox Grid.Column="0" Grid.Row="0"
                                     x:Name="DefaultLeverageTextBox"
                                     md:HintAssist.Hint="اهرم پیش‌فرض"
                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                     Margin="0,0,8,16"/>

                            <TextBox Grid.Column="1" Grid.Row="0"
                                     x:Name="DefaultRiskTextBox"
                                     md:HintAssist.Hint="ریسک پیش‌فرض (%)"
                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                     Margin="8,0,0,16"/>

                            <TextBox Grid.Column="0" Grid.Row="1"
                                     x:Name="DefaultCommissionTextBox"
                                     md:HintAssist.Hint="کمیسیون پیش‌فرض"
                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                     Margin="0,0,8,16"/>

                            <CheckBox Grid.Column="0" Grid.Row="2"
                                      x:Name="ShowPipsCalculatorCheckBox"
                                      Content="نمایش محاسبه‌گر پیپ"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,8,0"/>

                            <CheckBox Grid.Column="1" Grid.Row="2"
                                      x:Name="AutoCalculateRRCheckBox"
                                      Content="محاسبه خودکار R:R"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="8,0,0,0"/>
                        </Grid>
                    </Expander>
                </md:Card>

                <!-- پشتیبان‌گیری -->
                <md:Card Margin="0,8">
                    <Expander Header="تنظیمات پشتیبان‌گیری">
                        <Grid Margin="24,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <CheckBox Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2"
                                      x:Name="AutoBackupCheckBox"
                                      Content="پشتیبان‌گیری خودکار"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,0,16"/>

                            <TextBox Grid.Column="0" Grid.Row="1"
                                     x:Name="BackupIntervalTextBox"
                                     md:HintAssist.Hint="فاصله پشتیبان‌گیری (ساعت)"
                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                     Margin="0,0,8,16"/>

                            <TextBox Grid.Column="1" Grid.Row="1"
                                     x:Name="MaxBackupsTextBox"
                                     md:HintAssist.Hint="حداکثر تعداد نسخه"
                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                     Margin="8,0,0,16"/>

                            <Grid Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBox Grid.Column="0"
                                         x:Name="BackupPathTextBox"
                                         md:HintAssist.Hint="مسیر پشتیبان‌گیری"
                                         Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                         IsReadOnly="True"
                                         Margin="0,0,8,16"/>
                                
                                <Button Grid.Column="1"
                                        Content="..."
                                        Click="OnBrowseBackupPath"
                                        Width="40"
                                        Margin="0,0,0,16"/>
                            </Grid>

                            <CheckBox Grid.Column="0" Grid.Row="3" Grid.ColumnSpan="2"
                                      x:Name="EncryptBackupsCheckBox"
                                      Content="رمزنگاری نسخ پشتیبان"
                                      Style="{StaticResource MaterialDesignCheckBox}"/>
                        </Grid>
                    </Expander>
                </md:Card>

                <!-- متاتریدر -->
                <md:Card Margin="0,8">
                    <Expander Header="تنظیمات متاتریدر">
                        <Grid Margin="24,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <CheckBox Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2"
                                      x:Name="EnableAutoSyncCheckBox"
                                      Content="همگام‌سازی خودکار"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,0,16"/>

                            <TextBox Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2"
                                     x:Name="ServerUrlTextBox"
                                     md:HintAssist.Hint="آدرس سرور"
                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                     Margin="0,0,0,16"/>

                            <PasswordBox Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2"
                                         x:Name="ApiKeyTextBox"
                                         md:HintAssist.Hint="کلید API"
                                         Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                                         Margin="0,0,0,16"/>

                            <TextBox Grid.Column="0" Grid.Row="3"
                                     x:Name="SyncIntervalTextBox"
                                     md:HintAssist.Hint="فاصله همگام‌سازی (ثانیه)"
                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                     Margin="0,0,8,16"/>

                            <Button Grid.Column="1" Grid.Row="3"
                                    Content="تست اتصال"
                                    Click="OnTestConnection"
                                    Style="{StaticResource MaterialDesignRaisedButton}"
                                    Margin="8,0,0,16"/>

                            <CheckBox Grid.Column="0" Grid.Row="4" Grid.ColumnSpan="2"
                                      x:Name="CaptureScreenshotsCheckBox"
                                      Content="ذخیره خودکار تصاویر چارت"
                                      Style="{StaticResource MaterialDesignCheckBox}"/>
                        </Grid>
                    </Expander>
                </md:Card>

                <!-- رابط کاربری -->
                <md:Card Margin="0,8">
                    <Expander Header="تنظیمات رابط کاربری">
                        <Grid Margin="24,16">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <CheckBox Grid.Row="0"
                                      x:Name="ShowSplashCheckBox"
                                      Content="نمایش صفحه شروع"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,0,8"/>

                            <CheckBox Grid.Row="1"
                                      x:Name="AnimationsCheckBox"
                                      Content="انیمیشن‌ها فعال"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,0,8"/>

                            <CheckBox Grid.Row="2"
                                      x:Name="CompactModeCheckBox"
                                      Content="حالت فشرده"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,0,8"/>

                            <CheckBox Grid.Row="3"
                                      x:Name="ShowTooltipsCheckBox"
                                      Content="نمایش راهنماها"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,0,8"/>

                            <CheckBox Grid.Row="4"
                                      x:Name="ConfirmDeleteCheckBox"
                                      Content="تأیید قبل از حذف"
                                      Style="{StaticResource MaterialDesignCheckBox}"
                                      Margin="0,0,0,8"/>

                            <CheckBox Grid.Row="5"
                                      x:Name="RememberPositionCheckBox"
                                      Content="ذخیره موقعیت پنجره"
                                      Style="{StaticResource MaterialDesignCheckBox}"/>
                        </Grid>
                    </Expander>
                </md:Card>
            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <md:Card Grid.Row="1" Margin="8">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Margin="16">
                <Button Content="ذخیره"
                        Click="OnSaveClick"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Width="120"
                        Margin="0,0,8,0"/>
                
                <Button Content="پیش‌فرض"
                        Click="OnResetClick"
                        Style="{StaticResource MaterialDesignFlatButton}"
                        Width="120"/>
            </StackPanel>
        </md:Card>
    </Grid>
</UserControl>
<!-- پایان کد -->