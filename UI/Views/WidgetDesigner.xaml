<!-- مسیر فایل: UI/Views/WidgetDesigner.xaml -->
<!-- ابتدای کد -->
<UserControl x:Class="TradingJournal.UI.Views.WidgetDesigner"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             FlowDirection="RightToLeft">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="350"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Widget List -->
        <md:Card Grid.Column="0" Margin="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0"
                           Text="لیست ویجت‌ها"
                           Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                           Margin="16"/>

                <ListBox Grid.Row="1"
                         x:Name="WidgetsList"
                         ItemsSource="{Binding Widgets}"
                         DisplayMemberPath="Title"
                         Margin="16,0"/>

                <StackPanel Grid.Row="2" 
                            Orientation="Horizontal"
                            Margin="16">
                    <Button Content="جدید"
                            Click="OnNewWidget"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Margin="0,0,8,0"/>
                    
                    <Button Content="ویرایش"
                            Click="OnEditWidget"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Margin="0,0,8,0"/>
                    
                    <Button Content="حذف"
                            Click="OnDeleteWidget"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Foreground="Red"/>
                </StackPanel>
            </Grid>
        </md:Card>

        <!-- Widget Editor and Preview -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Widget Settings -->
            <md:Card Grid.Row="0" Margin="8">
                <Grid Margin="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBox Grid.Column="0" Grid.Row="0"
                             x:Name="WidgetNameTextBox"
                             md:HintAssist.Hint="نام ویجت"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="4"/>

                    <TextBox Grid.Column="1" Grid.Row="0"
                             x:Name="WidgetTitleTextBox"
                             md:HintAssist.Hint="عنوان"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="4"/>

                    <ComboBox Grid.Column="2" Grid.Row="0"
                              x:Name="WidgetTypeComboBox"
                              md:HintAssist.Hint="نوع"
                              Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                              Margin="4">
                        <ComboBoxItem Content="Chart"/>
                        <ComboBoxItem Content="Table"/>
                        <ComboBoxItem Content="Card"/>
                        <ComboBoxItem Content="KPI"/>
                        <ComboBoxItem Content="Gauge"/>
                    </ComboBox>

                    <ComboBox Grid.Column="0" Grid.Row="1"
                              x:Name="WidgetSizeComboBox"
                              md:HintAssist.Hint="اندازه"
                              Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                              Margin="4">
                        <ComboBoxItem Content="Small"/>
                        <ComboBoxItem Content="Medium"/>
                        <ComboBoxItem Content="Large"/>
                        <ComboBoxItem Content="ExtraLarge"/>
                    </ComboBox>

                    <TextBox Grid.Column="1" Grid.Row="1"
                             x:Name="DataSourceTextBox"
                             md:HintAssist.Hint="منبع داده"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="4"/>

                    <TextBox Grid.Column="2" Grid.Row="1"
                             x:Name="RefreshIntervalTextBox"
                             md:HintAssist.Hint="بازه به‌روزرسانی"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="4"/>

                    <StackPanel Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="2"
                                Orientation="Horizontal"
                                HorizontalAlignment="Center"
                                Margin="0,16,0,0">
                        <Button Content="ذخیره"
                                Click="OnSaveWidget"
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Width="100"
                                Margin="0,0,8,0"/>
                        
                        <Button Content="پیش‌نمایش"
                                Click="OnPreviewWidget"
                                Style="{StaticResource MaterialDesignFlatButton}"
                                Width="100"/>
                    </StackPanel>
                </Grid>
            </md:Card>

            <!-- Preview -->
            <md:Card Grid.Row="1" Margin="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0"
                               Text="پیش‌نمایش"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Margin="16"/>

                    <ScrollViewer Grid.Row="1">
                        <Grid x:Name="PreviewContainer"
                              MinHeight="200"
                              Background="#F5F5F5"
                              Margin="16"/>
                    </ScrollViewer>
                </Grid>
            </md:Card>
        </Grid>
    </Grid>
</UserControl>
<!-- پایان کد -->